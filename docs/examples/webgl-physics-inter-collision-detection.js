(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{0:function(t,e,r){"use strict";var n=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=r};n.prototype.divide=function(t){if("number"!=typeof t)throw new Error("invalid input: "+t);return this.x/=t,this.y/=t,this.z/=t,this},n.prototype.cross=function(t){var e=this.x,r=this.y,i=this.z;if(!(t instanceof n))throw new Error("invalid input: "+t);this.x=r*t.z-i*t.y,this.y=i*t.x-e*t.z,this.z=e*t.y-r*t.x},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.prototype.normalize=function(){return this.divide(this.length())},e.a=n},2:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a});var n=r(0);function i(t,e,r,n){for(var i,a,o,s=(n=Object.assign({},{size:10,color:[.5,.5,1,1],translation:[0,0,0],textured:!1},n)).size,u=n.color,f=n.translation,l=n.textured,h=[],c=[],v=e.trianglesNormalBuffers,d=e.trianglesColorBuffers,m=e.trianglesVerticeBuffers,p=e.trianglesTexCoordBuffers,A=e.vertexIndexBuffers,R=0;R<5;++R)h.push(0),h.push(1),h.push(0),c.push(u[0]),c.push(u[1]),c.push(u[2]),c.push(u[3]);i=[0,0,0,-s,0,-s,s,0,-s,s,0,s,-s,0,s],o=[0,0,-s,-s,s,-s,s,s,-s,s];for(var g=0;g<i.length;g+=3)i[g]+=f[0],i[g+1]+=f[1],i[g+2]+=f[2];a=[0,1,2,0,2,3,0,3,4,0,4,1],v[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,v[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),v[r].itemSize=3,v[r].numItems=h.length/3,d[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,d[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),d[r].itemSize=4,d[r].numItems=c.length/4,m[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,m[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),m[r].itemSize=3,m[r].numItems=i.length/3,l&&(p[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,p[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),p[r].itemSize=2,p[r].numItems=o.length/2),A[r]=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,A[r]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),t.STREAM_DRAW),A[r].itemSize=3,A[r].numItems=a.length}function a(t,e,r,i){for(var a=(i=Object.assign({},{color:[1,0,0,1],translation:[0,0,0],radius:1,division:30,smoothShading:!0,textured:!1},i)).color,o=i.translation,s=i.radius,u=i.division,f=i.smoothShading,l=i.textured,h=u,c=u,v=[],d=[],m=[],p=[],A=[],R=e.trianglesNormalBuffers,g=e.trianglesColorBuffers,x=e.trianglesVerticeBuffers,y=e.trianglesTexCoordBuffers,B=e.vertexIndexBuffers,E=0;E<=h;E++)for(var b=E*Math.PI/h,F=Math.sin(b),_=Math.cos(b),M=0;M<=c;M++){var S=2*M*Math.PI/c,T=Math.sin(S),w=Math.cos(S)*F,z=_,U=T*F;A.push(.5*(w+1)),A.push(.5*(z+1)),m.push(w),m.push(z),m.push(U),d.push(a[0]),d.push(a[1]),d.push(a[2]),d.push(a[3]),v.push(s*w+o[0]),v.push(s*z+o[1]),v.push(s*U+o[2])}for(var D=0;D<h;D++)for(var I=0;I<c;I++){var L=D*(c+1)+I,Y=L+c+1;p.push(L),p.push(Y),p.push(L+1),p.push(Y),p.push(Y+1),p.push(L+1)}if(!f){v=function(t,e){for(var r=[],n=0;n<e.length;++n){var i=3*e[n];r.push(t[i]),r.push(t[i+1]),r.push(t[i+2])}return r}(v,p),d=[];for(var C=0;C<p.length;++C)d.push(a[0]),d.push(a[1]),d.push(a[2]),d.push(a[3]);m=function(t,e){for(var r=[],i=0;i<e.length;i+=3){var a=3*e[i],o=3*e[i+1],s=3*e[i+2],u=new n.a(t[a],t[a+1],t[a+2]),f=new n.a(t[o],t[o+1],t[o+2]),l=new n.a(t[s],t[s+1],t[s+2]),h=(u.x+f.x+l.x)/3,c=(u.y+f.y+l.y)/3,v=(u.z+f.z+l.z)/3,d=new n.a(h,c,v);r.push(d.x),r.push(d.y),r.push(d.z),r.push(d.x),r.push(d.y),r.push(d.z),r.push(d.x),r.push(d.y),r.push(d.z)}return r}(m,p)}R[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,R[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(m),t.STATIC_DRAW),R[r].itemSize=3,R[r].numItems=m.length/3,g[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,g[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(d),t.STATIC_DRAW),g[r].itemSize=4,g[r].numItems=d.length/4,x[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,x[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(v),t.STATIC_DRAW),x[r].itemSize=3,x[r].numItems=v.length/3,l&&(y[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,y[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(A),t.STATIC_DRAW),y[r].itemSize=2,y[r].numItems=A.length/2),B[r]=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,B[r]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(p),t.STREAM_DRAW),B[r].itemSize=3,B[r].numItems=p.length}},3:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a});var n=r(0),i=function(t){t=Object.assign({},{radius:1,position:new n.a(0,0,0),velocity:new n.a(0,0,0),acceleration:new n.a(0,0,0)},t),this.radius=t.radius,this.position=t.position,this.velocity=t.velocity,this.acceleration=t.acceleration,this.vboIndex=t.vboIndex,this.totalVelocity=0},a=function(t){t=Object.assign({},{startX:0,startY:0,endX:0,endY:0},t),this.slope=0,(t.endX-t.startX>1e-4||t.endX-t.startX<-.001)&&(this.slope=(t.endY-t.startY)/(t.endX-t.startX)),this.startX=t.startX,this.startY=t.startY,this.endX=t.endX,this.endY=t.endY;var e=[t.startX-t.endX,t.startY-t.endY];this.angle=0,this.angle=Math.atan2(e[1],e[0])}},53:function(t,e,r){"use strict";r.r(e);var n=r(2),i=r(3),a=r(0),o=null,s=null,u=null,f=null,l=null,h=null,c=null,v=null,d=null,m=[],p=[],A=[],R=[],g=mat4.create(),x=mat4.create(),y=mat3.create(),B=!1,E={flat:{vertexShader:"\n    attribute vec3 aVertexPosition;\n    attribute vec3 aVertexColor;\n    attribute vec3 aVertexNormal;\n\n    uniform mat4 uPMatrix;    \n    uniform mat4 uMVMatrix;\n    uniform mat3 uNormalMatrix;\n    \n    varying highp vec3 vColor;\n    varying highp vec3 L;\n    varying highp vec3 N;\n    \n    void main(void) {\n      gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n      \n      vec3 pointLightPosition = vec3(1.0, 2.0, -1.0);\n      vec3 pointLightDirection = normalize(vec3(pointLightPosition.xyz - aVertexPosition.xyz));\n      vec3 ambientColor = vec3(0.1, 0.1, 0.1);\n      \n      L = vec3(uPMatrix * uMVMatrix * vec4(pointLightDirection, 1.0));\n      N = uNormalMatrix * aVertexNormal;\n      \n      vColor = aVertexColor;\n    }\n  ",fragmentShader:"\n    varying highp vec3 vColor;\n    varying highp vec3 N;\n    varying highp vec3 L;\n    \n    void main(void) {\n      highp float lambert = max(dot(normalize(N), normalize(L)), 0.0);\n      gl_FragColor = vec4(vColor * lambert, 1.0);\n    }\n  "}},b=[],F=1,_=5,M=-1,S=-.8,T=10,w=50;function z(t,e){var r=o.createShader(e);return o.shaderSource(r,t),o.compileShader(r),o.getShaderParameter(r,o.COMPILE_STATUS)||alert("Error compiling shader: "+o.getShaderInfoLog(r)),r}function U(t,e){for(var r=0;r<t.length;r++)if(t[r].vboIndex===e)return r;return-1}function D(t,e){var r=t[e];t.forEach(function(n,i){if(e!==i){var o=r.position,s=n.position;if(new a.a(o.x-s.x,o.y-s.y,o.z-s.z).length()<r.radius+n.radius){var u=r.velocity,f=n.velocity,l=r.radius,h=n.radius,c=I(u.x,f.x,l,h),v=I(u.y,f.y,l,h);r.velocity=new a.a(c[0],v[0],r.velocity.z),n.velocity=new a.a(c[1],v[1],n.velocity.z),L(t,e),L(t,i)}}})}function I(t,e,r,n){var i=r*r*r/(n*n*n);return[(i-1)/(i+1)*t+2/(i+1)*e,(1-i)/(1+i)*e+2*i/(1+i)*t]}function L(t,e){var r=t[e];!function(t){var e=b[t];return _-(e.position.y+e.radius)>M}(e)?(r.position.y-=r.velocity.y,r.velocity.y*=S):(r.velocity.y+=r.acceleration.y,r.position.y+=r.velocity.y),r.position.x>T||r.position.x<-T?(r.position.x+=-1*r.velocity.x,r.position.x*=-1):r.position.x+=r.velocity.x,r.position.z>T||r.position.z<-T?(r.position.z+=-1*r.velocity.z,r.position.z*=-1):r.position.z+=r.velocity.z}function Y(){o.uniformMatrix4fv(f.pMatrixUniform,!1,g),o.uniformMatrix4fv(f.mvMatrixUniform,!1,x),o.uniformMatrix3fv(f.normalMatrixUniform,!1,y)}window.addEventListener("load",function(){s=document.querySelector("#canvas"),u=document.querySelector("#container"),s.width=u.clientWidth,s.height=u.clientHeight,function(){var t=function(t){t>0?F+=1:(F-=.1)<.01&&(F=.1)};s.addEventListener("mousewheel",function(e){e.stopPropagation(),e.preventDefault(),t(e.wheelDelta)}),s.addEventListener("DOMMouseScroll",function(e){e.stopPropagation(),e.preventDefault(),t(-.1*e.originalEvent.detail)})}();try{o=s.getContext("webgl")||s.getContext("experimental-webgl")}catch(t){console.error(t)}o&&(!function(t){(function(t,e){var r=E[e].vertexShader,n=E[e].fragmentShader;h=z(r,o.VERTEX_SHADER),l=z(n,o.FRAGMENT_SHADER),o.attachShader(t,h),o.attachShader(t,l),o.linkProgram(t),o.getProgramParameter(t,o.LINK_STATUS)||alert("Unable to initialize the shader program.")})(f=o.createProgram(),t),o.useProgram(f),f.pMatrixUniform=o.getUniformLocation(f,"uPMatrix"),f.mvMatrixUniform=o.getUniformLocation(f,"uMVMatrix"),f.normalMatrixUniform=o.getUniformLocation(f,"uNormalMatrix")}("flat"),function(){Object(n.a)(o,{trianglesNormalBuffers:p,trianglesColorBuffers:A,trianglesVerticeBuffers:m,vertexIndexBuffers:R},0,{translation:[0,M,0]});for(var t=1;t<=w;++t){var e=.5*Math.random()+0;Object(n.b)(o,{trianglesNormalBuffers:p,trianglesColorBuffers:A,trianglesVerticeBuffers:m,vertexIndexBuffers:R},t,{color:[Math.random(),Math.random(),Math.random(),1],radius:e}),b.push(new i.a({vboIndex:t,radius:e,position:new a.a(10*Math.random()-5,-5*Math.random(),10*Math.random()-5),acceleration:new a.a(0,.01,0)}))}c=o.getAttribLocation(f,"aVertexPosition"),d=o.getAttribLocation(f,"aVertexColor"),v=o.getAttribLocation(f,"aVertexNormal"),o.enableVertexAttribArray(c),o.enableVertexAttribArray(d),o.enableVertexAttribArray(v)}(),function t(){B||(o.clearColor(.7,.7,.7,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.DEPTH_TEST),o.viewport(0,0,s.width,s.height),mat4.perspective(g,45,s.width/s.height,.1,100),function(){for(var t=0;t<R.length;++t){mat4.identity(x),mat4.translate(x,x,[0,-1,-15.5]);var e=U(b,t);if(-1!==e){var r=b[e];L(b,e),D(b,e),mat4.translate(x,x,[r.position.x,_-r.position.y,r.position.z])}mat4.scale(x,x,[F,F,F]);var n=mat3.create();mat3.fromMat4(n,x),mat3.invert(y,n),mat3.transpose(y,y),Y(),o.bindBuffer(o.ARRAY_BUFFER,m[t]),o.vertexAttribPointer(c,3,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,A[t]),o.vertexAttribPointer(d,4,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,p[t]),o.vertexAttribPointer(v,3,o.FLOAT,!1,0,0),0!==t&&t%2==0?(o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE),o.blendEquation(o.FUNC_ADD)):(o.disable(o.BLEND),o.enable(o.DEPTH_TEST)),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,R[t]),o.drawElements(o.TRIANGLES,R[t].numItems,o.UNSIGNED_SHORT,0)}}()),requestAnimationFrame(t)}())}),document.addEventListener("keyup",function(t){switch(t.keyCode){case 80:B=!B}})}},[[53,0]]]);
//# sourceMappingURL=webgl-physics-inter-collision-detection.js.map