{"version":3,"sources":["webpack:///./webgl-fragment.js"],"names":["let","gl","canvas","container","glProgram","fragmentShader","vertexShader","vertexPositionAttribute","trianglesVerticeBuffer","vertexIndexBuffer","SHADER","circle","circle_floor","circle_uniform_1","circle_uniform_2","radios","document","querySelectorAll","changeHandler","deleteProgram","createProgram","this","value","type","const","vsSource","fsSource","makeShader","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","useProgram","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","window","addEventListener","querySelector","width","clientWidth","height","clientHeight","getContext","e","console","error","size","vertexPositionData","indexData","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","itemSize","numItems","length","ELEMENT_ARRAY_BUFFER","Uint16Array","STREAM_DRAW","createSquare","colors","Uint8Array","colorsTexture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","uniform1i","getUniformLocation","setUniforms","getAttribLocation","enableVertexAttribArray","animLoop","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","enable","DEPTH_TEST","viewport","vertexAttribPointer","FLOAT","drawElements","TRIANGLES","UNSIGNED_SHORT","requestAnimationFrame","Array","prototype","forEach","call","radio"],"mappings":"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","file":"webgl-fragment.js","sourcesContent":["let gl = null;\nlet canvas = null;\nlet container = null;\nlet glProgram = null;\nlet fragmentShader = null;\nlet vertexShader = null;\n\nlet vertexPositionAttribute = null;\nlet trianglesVerticeBuffer = null;\nlet vertexIndexBuffer = null;\n\nconst SHADER = {\n  circle: {\n    vertexShader: circleVertexShaderSource(),\n    fragmentShader: circleFragmentShaderSource()\n  },\n  circle_floor: {\n    vertexShader: circleFloorVertexShaderSource(),\n    fragmentShader: circleFloorFragmentShaderSource()\n  },\n  circle_uniform_1: {\n    vertexShader: circleUniform1VertexShaderSource(),\n    fragmentShader: circleUniform1FragmentShaderSource()\n  },\n  circle_uniform_2: {\n    vertexShader: circleUniform2VertexShaderSource(),\n    fragmentShader: circleUniform2FragmentShaderSource()\n  },\n};\n\nconst radios = document.querySelectorAll('input[type=radio][name=\"fragment\"]');\n\nwindow.addEventListener('load', initWebGL);\n\nfunction changeHandler() {\n  gl.deleteProgram(glProgram);\n  createProgram(this.value);\n}\n\nArray.prototype.forEach.call(radios, function (radio) {\n  radio.addEventListener('change', changeHandler);\n});\n\nfunction initWebGL() {\n  canvas = document.querySelector('#canvas');\n  container = document.querySelector('#container');\n  canvas.width = container.clientWidth;\n  canvas.height = container.clientHeight;\n\n  try {\n    gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n  } catch (e) {\n    console.error(e);\n  }\n\n  if (gl) {\n    initShaders();\n    createSquare();\n    setUniforms();\n\n    vertexPositionAttribute = gl.getAttribLocation(glProgram, \"aVertexPosition\");\n    gl.enableVertexAttribArray(vertexPositionAttribute);\n\n    (function animLoop() {\n      setupWebGL();\n      drawScene();\n\n      requestAnimationFrame(animLoop);\n    })();\n  }\n}\n\nfunction setupWebGL() {\n  // set the clear color to a shade of green\n  gl.clearColor(0.7, 0.7, 0.7, 1.0);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  gl.enable(gl.DEPTH_TEST);\n\n  gl.viewport(0, 0, canvas.width, canvas.height);\n}\n\nfunction initShaders() {\n  createProgram('circle');\n}\n\nfunction createProgram(type) {\n  // create program\n  glProgram = gl.createProgram();\n  attachShader(glProgram, type);\n  // use program\n  gl.useProgram(glProgram);\n}\n\nfunction attachShader(glProgram, type) {\n  // get shader source\n  const vsSource = SHADER[type].vertexShader;\n  const fsSource = SHADER[type].fragmentShader;\n\n  // compile shaders\n  vertexShader = makeShader(vsSource, gl.VERTEX_SHADER);\n  fragmentShader = makeShader(fsSource, gl.FRAGMENT_SHADER);\n\n  // attach and link shaders to the program\n  gl.attachShader(glProgram, vertexShader);\n  gl.attachShader(glProgram, fragmentShader);\n  gl.linkProgram(glProgram);\n\n  if (!gl.getProgramParameter(glProgram, gl.LINK_STATUS)) {\n    alert('Unable to initialize the shader program.');\n  }\n}\n\nfunction makeShader(source, type) {\n  // compile the shader\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    alert(`Error compiling shader: ${gl.getShaderInfoLog(shader)}`);\n  }\n\n  return shader;\n}\n\nfunction drawScene() {\n  gl.bindBuffer(gl.ARRAY_BUFFER, trianglesVerticeBuffer);\n  gl.vertexAttribPointer(vertexPositionAttribute, 3, gl.FLOAT, false, 0, 0);\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, vertexIndexBuffer);\n  gl.drawElements(gl.TRIANGLES, vertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n}\n\nfunction createSquare(size = 2.0) {\n  const vertexPositionData = [\n    0.0, 0.0, 0.0,\n    -size / 2.0, -size / 2.0, 0.0,\n    size / 2.0, -size / 2.0, 0.0,\n    size / 2.0, size / 2.0, 0.0,\n    -size / 2.0, size / 2.0, 0.0,\n  ];\n  const indexData = [0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 1];\n\n  trianglesVerticeBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, trianglesVerticeBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexPositionData), gl.STATIC_DRAW);\n  trianglesVerticeBuffer.itemSize = 3;\n  trianglesVerticeBuffer.numItems = vertexPositionData.length / 3;\n  vertexIndexBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, vertexIndexBuffer);\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), gl.STREAM_DRAW);\n  vertexIndexBuffer.itemSize = 3;\n  vertexIndexBuffer.numItems = indexData.length;\n}\n\nfunction setUniforms() {\n  const colorData = [\n    255, 0, 0, 255,\n    255, 0, 0, 255,\n    255, 0, 0, 255,\n    255, 0, 0, 255,\n    255, 255, 0, 255,\n    255, 255, 0, 255,\n    255, 255, 0, 255,\n    255, 255, 0, 255,\n    0, 255, 0, 255,\n    0, 255, 0, 255,\n    0, 255, 0, 255,\n    0, 255, 0, 255,\n    0, 0, 255, 255,\n    0, 0, 255, 255,\n    0, 0, 255, 255,\n    0, 0, 255, 255\n  ];\n  const colors = new Uint8Array(colorData);\n  const colorsTexture = gl.createTexture();\n\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, colorsTexture);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 4, 4, 0,\n    gl.RGBA, gl.UNSIGNED_BYTE, colors);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.uniform1i(gl.getUniformLocation(glProgram, \"sColors\"), colorsTexture);\n}\n\nfunction circleVertexShaderSource() {\n  return `\n    attribute vec3 aVertexPosition;\n    varying vec2 position;\n    \n    void main(void) {\n      position = vec2(aVertexPosition.xy);\n      gl_Position = vec4(position, 0.0, 1.0);\n    }\n  `;\n}\n\nfunction circleFragmentShaderSource() {\n  return `\n    varying highp vec2 position;\n    \n    void main(void) {   \n      highp float d = length(position);\n      gl_FragColor = vec4(max(0.0, 1.0 - d), 0.0, 0.0, 1.0);\n    }\n  `;\n}\n\nfunction circleFloorVertexShaderSource() {\n  return `\n    attribute vec3 aVertexPosition;\n    varying vec2 position;\n    \n    void main(void) {\n      position = vec2(aVertexPosition.xy);\n      gl_Position = vec4(position, 0.0, 1.0);\n    }\n  `;\n}\n\nfunction circleFloorFragmentShaderSource() {\n  return `\n    varying highp vec2 position;\n    \n    void main(void) {   \n      highp float d = length(position);\n      highp float c = floor(d*10.0) * 0.1;\n      gl_FragColor = vec4(max(0.0, 1.0 - c), 0.0, 0.0, 1.0);\n    }\n  `;\n}\n\nfunction circleUniform1VertexShaderSource() {\n  return `\n    attribute vec3 aVertexPosition;\n    varying vec2 position;\n    \n    void main(void) {\n      position = vec2(aVertexPosition.xy);\n      gl_Position = vec4(position, 0.0, 1.0);\n    }\n  `;\n}\n\nfunction circleUniform1FragmentShaderSource() {\n  return `\n    uniform sampler2D sColors;\n    varying highp vec2 position;\n    \n    void main(void) {   \n      highp float t = length(position);\n      gl_FragColor = vec4(texture2D(sColors, vec2(0.0, t)).rgb, 1.0);\n    }\n  `;\n}\n\nfunction circleUniform2VertexShaderSource() {\n  return `\n    attribute vec3 aVertexPosition;\n    varying vec2 position;\n    \n    void main(void) {\n      position = vec2(aVertexPosition.xy);\n      gl_Position = vec4(position, 0.0, 1.0);\n    }\n  `;\n}\n\nfunction circleUniform2FragmentShaderSource() {\n  return `\n    uniform sampler2D sColors;\n    varying highp vec2 position;\n    \n    void main(void) {   \n      highp float t = length(position);\n      highp float x = sin(-position.y) * tan(length(position.xx));\n      t = t + x;\n      gl_FragColor = mix( vec4(0.0, 0.0, 0.0, 1.0), vec4(texture2D(sColors, vec2(0.0, t)).rgb, 1.0), t);\n    }\n  `;\n}\n"],"sourceRoot":""}