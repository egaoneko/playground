(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{0:function(e,t,r){"use strict";var n=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.z=r};n.prototype.divide=function(e){if("number"!=typeof e)throw new Error("invalid input: "+e);return this.x/=e,this.y/=e,this.z/=e,this},n.prototype.cross=function(e){var t=this.x,r=this.y,a=this.z;if(!(e instanceof n))throw new Error("invalid input: "+e);this.x=r*e.z-a*e.y,this.y=a*e.x-t*e.z,this.z=t*e.y-r*e.x},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.prototype.normalize=function(){return this.divide(this.length())},t.a=n},2:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return i});var n=r(0);function a(e,t,r,n){for(var a,i,o,s=(n=Object.assign({},{size:10,color:[.5,.5,1,1],translation:[0,0,0],textured:!1},n)).size,u=n.color,f=n.translation,l=n.textured,h=[],c=[],d=t.trianglesNormalBuffers,m=t.trianglesColorBuffers,v=t.trianglesVerticeBuffers,g=t.trianglesTexCoordBuffers,A=t.vertexIndexBuffers,p=0;p<5;++p)h.push(0),h.push(1),h.push(0),c.push(u[0]),c.push(u[1]),c.push(u[2]),c.push(u[3]);a=[0,0,0,-s,0,-s,s,0,-s,s,0,s,-s,0,s],o=[0,0,-s,-s,s,-s,s,s,-s,s];for(var R=0;R<a.length;R+=3)a[R]+=f[0],a[R+1]+=f[1],a[R+2]+=f[2];i=[0,1,2,0,2,3,0,3,4,0,4,1],d[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,d[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(h),e.STATIC_DRAW),d[r].itemSize=3,d[r].numItems=h.length/3,m[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,m[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(c),e.STATIC_DRAW),m[r].itemSize=4,m[r].numItems=c.length/4,v[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,v[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),v[r].itemSize=3,v[r].numItems=a.length/3,l&&(g[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,g[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),g[r].itemSize=2,g[r].numItems=o.length/2),A[r]=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,A[r]),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STREAM_DRAW),A[r].itemSize=3,A[r].numItems=i.length}function i(e,t,r,a){for(var i=(a=Object.assign({},{color:[1,0,0,1],translation:[0,0,0],radius:1,division:30,smoothShading:!0,textured:!1},a)).color,o=a.translation,s=a.radius,u=a.division,f=a.smoothShading,l=a.textured,h=u,c=u,d=[],m=[],v=[],g=[],A=[],p=t.trianglesNormalBuffers,R=t.trianglesColorBuffers,B=t.trianglesVerticeBuffers,x=t.trianglesTexCoordBuffers,b=t.vertexIndexBuffers,E=0;E<=h;E++)for(var F=E*Math.PI/h,_=Math.sin(F),S=Math.cos(F),y=0;y<=c;y++){var T=2*y*Math.PI/c,I=Math.sin(T),w=Math.cos(T)*_,M=S,U=I*_;A.push(.5*(w+1)),A.push(.5*(M+1)),v.push(w),v.push(M),v.push(U),m.push(i[0]),m.push(i[1]),m.push(i[2]),m.push(i[3]),d.push(s*w+o[0]),d.push(s*M+o[1]),d.push(s*U+o[2])}for(var L=0;L<h;L++)for(var D=0;D<c;D++){var Y=L*(c+1)+D,C=Y+c+1;g.push(Y),g.push(C),g.push(Y+1),g.push(C),g.push(C+1),g.push(Y+1)}if(!f){d=function(e,t){for(var r=[],n=0;n<t.length;++n){var a=3*t[n];r.push(e[a]),r.push(e[a+1]),r.push(e[a+2])}return r}(d,g),m=[];for(var z=0;z<g.length;++z)m.push(i[0]),m.push(i[1]),m.push(i[2]),m.push(i[3]);v=function(e,t){for(var r=[],a=0;a<t.length;a+=3){var i=3*t[a],o=3*t[a+1],s=3*t[a+2],u=new n.a(e[i],e[i+1],e[i+2]),f=new n.a(e[o],e[o+1],e[o+2]),l=new n.a(e[s],e[s+1],e[s+2]),h=(u.x+f.x+l.x)/3,c=(u.y+f.y+l.y)/3,d=(u.z+f.z+l.z)/3,m=new n.a(h,c,d);r.push(m.x),r.push(m.y),r.push(m.z),r.push(m.x),r.push(m.y),r.push(m.z),r.push(m.x),r.push(m.y),r.push(m.z)}return r}(v,g)}p[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,p[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(v),e.STATIC_DRAW),p[r].itemSize=3,p[r].numItems=v.length/3,R[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,R[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(m),e.STATIC_DRAW),R[r].itemSize=4,R[r].numItems=m.length/4,B[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,B[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(d),e.STATIC_DRAW),B[r].itemSize=3,B[r].numItems=d.length/3,l&&(x[r]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,x[r]),e.bufferData(e.ARRAY_BUFFER,new Float32Array(A),e.STATIC_DRAW),x[r].itemSize=2,x[r].numItems=A.length/2),b[r]=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,b[r]),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),e.STREAM_DRAW),b[r].itemSize=3,b[r].numItems=g.length}},3:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return i});var n=r(0),a=function(e){e=Object.assign({},{radius:1,position:new n.a(0,0,0),velocity:new n.a(0,0,0),acceleration:new n.a(0,0,0)},e),this.radius=e.radius,this.position=e.position,this.velocity=e.velocity,this.acceleration=e.acceleration,this.vboIndex=e.vboIndex,this.totalVelocity=0},i=function(e){e=Object.assign({},{startX:0,startY:0,endX:0,endY:0},e),this.slope=0,(e.endX-e.startX>1e-4||e.endX-e.startX<-.001)&&(this.slope=(e.endY-e.startY)/(e.endX-e.startX)),this.startX=e.startX,this.startY=e.startY,this.endX=e.endX,this.endY=e.endY;var t=[e.startX-e.endX,e.startY-e.endY];this.angle=0,this.angle=Math.atan2(t[1],t[0])}},50:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(3),i=null,o=null,s=null,u=null,f=null,l=null,h=null,c=null,d=null,m=[],v=[],g=[],A=[],p=mat4.create(),R=mat4.create(),B=mat3.create(),x=!1,b={flat:{vertexShader:"\n    attribute vec3 aVertexPosition;\n    attribute vec3 aVertexColor;\n    attribute vec3 aVertexNormal;\n\n    uniform mat4 uPMatrix;    \n    uniform mat4 uMVMatrix;\n    uniform mat3 uNormalMatrix;\n    \n    varying highp vec3 vColor;\n    varying highp vec3 L;\n    varying highp vec3 N;\n    \n    void main(void) {\n      gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n      \n      vec3 pointLightPosition = vec3(1.0, 2.0, -1.0);\n      vec3 pointLightDirection = normalize(vec3(pointLightPosition.xyz - aVertexPosition.xyz));\n      vec3 ambientColor = vec3(0.1, 0.1, 0.1);\n      \n      L = vec3(uPMatrix * uMVMatrix * vec4(pointLightDirection, 1.0));\n      N = uNormalMatrix * aVertexNormal;\n      \n      vColor = aVertexColor;\n    }\n  ",fragmentShader:"\n    varying highp vec3 vColor;\n    varying highp vec3 N;\n    varying highp vec3 L;\n    \n    void main(void) {\n      highp float lambert = max(dot(normalize(N), normalize(L)), 0.0);\n      gl_FragColor = vec4(vColor * lambert, 1.0);\n    }\n  "}},E=[],F=[],_=0,S=0,y=1;function T(e,t){var r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)||alert("Error compiling shader: "+i.getShaderInfoLog(r)),r}window.addEventListener("load",function(){o=document.querySelector("#canvas"),s=document.querySelector("#container"),o.width=s.clientWidth,o.height=s.clientHeight,function(){o.addEventListener("mousedown",function(e){F=[e.pageX,e.pageY];var t=function(e){var t=e.pageX-F[0],r=e.pageY-F[1];F[0]=e.pageX,F[1]=e.pageY,_+=t,S+=r},r=function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",r)});var e=function(e){e>0?y+=1:(y-=.1)<.01&&(y=.1)};o.addEventListener("mousewheel",function(t){t.stopPropagation(),t.preventDefault(),e(t.wheelDelta)}),o.addEventListener("DOMMouseScroll",function(t){t.stopPropagation(),t.preventDefault(),e(-.1*t.originalEvent.detail)})}();try{i=o.getContext("webgl")||o.getContext("experimental-webgl")}catch(e){console.error(e)}i&&(!function(e){(function(e,t){var r=b[t].vertexShader,n=b[t].fragmentShader;l=T(r,i.VERTEX_SHADER),f=T(n,i.FRAGMENT_SHADER),i.attachShader(e,l),i.attachShader(e,f),i.linkProgram(e),i.getProgramParameter(e,i.LINK_STATUS)||alert("Unable to initialize the shader program.")})(u=i.createProgram(),e),i.useProgram(u),u.pMatrixUniform=i.getUniformLocation(u,"uPMatrix"),u.mvMatrixUniform=i.getUniformLocation(u,"uMVMatrix"),u.normalMatrixUniform=i.getUniformLocation(u,"uNormalMatrix")}("flat"),Object(n.b)(i,{trianglesNormalBuffers:v,trianglesColorBuffers:g,trianglesVerticeBuffers:m,vertexIndexBuffers:A},0,{translation:[-1,-.75,0],color:[1,0,0,1],division:20,smoothShading:!1}),Object(n.b)(i,{trianglesNormalBuffers:v,trianglesColorBuffers:g,trianglesVerticeBuffers:m,vertexIndexBuffers:A},1,{translation:[0,0,1],color:[0,1,0,1],division:10,smoothShading:!1}),Object(n.b)(i,{trianglesNormalBuffers:v,trianglesColorBuffers:g,trianglesVerticeBuffers:m,vertexIndexBuffers:A},2,{translation:[1,.25,-1],color:[1,1,0,1],division:5,smoothShading:!1}),Object(n.b)(i,{trianglesNormalBuffers:v,trianglesColorBuffers:g,trianglesVerticeBuffers:m,vertexIndexBuffers:A},3,{translation:[-1,1,-1],color:[1,0,1,1]}),Object(n.b)(i,{trianglesNormalBuffers:v,trianglesColorBuffers:g,trianglesVerticeBuffers:m,vertexIndexBuffers:A},4,{translation:[-0,1.75,-0],color:[0,1,1,1]}),Object(n.a)(i,{trianglesNormalBuffers:v,trianglesColorBuffers:g,trianglesVerticeBuffers:m,vertexIndexBuffers:A},5,{translation:[0,-1,0]}),E.push(new a.a({vboIndex:0})),E.push(new a.a({vboIndex:1})),E.push(new a.a({vboIndex:2})),E.push(new a.a({vboIndex:3})),E.push(new a.a({vboIndex:4})),h=i.getAttribLocation(u,"aVertexPosition"),d=i.getAttribLocation(u,"aVertexColor"),c=i.getAttribLocation(u,"aVertexNormal"),i.enableVertexAttribArray(h),i.enableVertexAttribArray(d),i.enableVertexAttribArray(c),function e(){x||(i.clearColor(.7,.7,.7,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.DEPTH_TEST),i.viewport(0,0,o.width,o.height),mat4.perspective(p,45,o.width/o.height,.1,100),function(){mat4.identity(R),mat4.translate(R,R,[0,0,-20]),mat4.rotate(R,R,2*_*Math.PI/180,[0,1,0]),mat4.rotate(R,R,2*S*Math.PI/180,[1,0,0]),mat4.scale(R,R,[y,y,y]);var e=mat3.create();mat3.fromMat4(e,R),mat3.invert(B,e),mat3.transpose(B,B),i.uniformMatrix4fv(u.pMatrixUniform,!1,p),i.uniformMatrix4fv(u.mvMatrixUniform,!1,R),i.uniformMatrix3fv(u.normalMatrixUniform,!1,B);for(var t=0;t<A.length;++t)i.bindBuffer(i.ARRAY_BUFFER,m[t]),i.vertexAttribPointer(h,3,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,g[t]),i.vertexAttribPointer(d,4,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,v[t]),i.vertexAttribPointer(c,3,i.FLOAT,!1,0,0),4===t?(i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE),i.blendEquation(i.FUNC_ADD)):(i.disable(i.BLEND),i.enable(i.DEPTH_TEST)),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,A[t]),t>2?i.drawElements(i.TRIANGLES,A[t].numItems,i.UNSIGNED_SHORT,0):i.drawArrays(i.TRIANGLES,0,m[t].numItems)}()),requestAnimationFrame(e)}())}),document.addEventListener("keyup",function(e){switch(e.keyCode){case 80:x=!x}})}},[[50,0]]]);
//# sourceMappingURL=webgl-physics-base.js.map