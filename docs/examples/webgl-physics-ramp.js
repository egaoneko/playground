(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{0:function(t,e,r){"use strict";var n=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=r};n.prototype.divide=function(t){if("number"!=typeof t)throw new Error("invalid input: "+t);return this.x/=t,this.y/=t,this.z/=t,this},n.prototype.cross=function(t){var e=this.x,r=this.y,a=this.z;if(!(t instanceof n))throw new Error("invalid input: "+t);this.x=r*t.z-a*t.y,this.y=a*t.x-e*t.z,this.z=e*t.y-r*t.x},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.prototype.normalize=function(){return this.divide(this.length())},e.a=n},2:function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return i});var n=r(0);function a(t,e,r,n){for(var a,i,o,s=(n=Object.assign({},{size:10,color:[.5,.5,1,1],translation:[0,0,0],textured:!1},n)).size,u=n.color,f=n.translation,l=n.textured,h=[],c=[],A=e.trianglesNormalBuffers,m=e.trianglesColorBuffers,d=e.trianglesVerticeBuffers,p=e.trianglesTexCoordBuffers,v=e.vertexIndexBuffers,R=0;R<5;++R)h.push(0),h.push(1),h.push(0),c.push(u[0]),c.push(u[1]),c.push(u[2]),c.push(u[3]);a=[0,0,0,-s,0,-s,s,0,-s,s,0,s,-s,0,s],o=[0,0,-s,-s,s,-s,s,s,-s,s];for(var g=0;g<a.length;g+=3)a[g]+=f[0],a[g+1]+=f[1],a[g+2]+=f[2];i=[0,1,2,0,2,3,0,3,4,0,4,1],A[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,A[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),A[r].itemSize=3,A[r].numItems=h.length/3,m[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,m[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),m[r].itemSize=4,m[r].numItems=c.length/4,d[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,d[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW),d[r].itemSize=3,d[r].numItems=a.length/3,l&&(p[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,p[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),p[r].itemSize=2,p[r].numItems=o.length/2),v[r]=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,v[r]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),t.STREAM_DRAW),v[r].itemSize=3,v[r].numItems=i.length}function i(t,e,r,a){for(var i=(a=Object.assign({},{color:[1,0,0,1],translation:[0,0,0],radius:1,division:30,smoothShading:!0,textured:!1},a)).color,o=a.translation,s=a.radius,u=a.division,f=a.smoothShading,l=a.textured,h=u,c=u,A=[],m=[],d=[],p=[],v=[],R=e.trianglesNormalBuffers,g=e.trianglesColorBuffers,x=e.trianglesVerticeBuffers,y=e.trianglesTexCoordBuffers,B=e.vertexIndexBuffers,b=0;b<=h;b++)for(var F=b*Math.PI/h,E=Math.sin(F),_=Math.cos(F),S=0;S<=c;S++){var w=2*S*Math.PI/c,M=Math.sin(w),Y=Math.cos(w)*E,T=_,U=M*E;v.push(.5*(Y+1)),v.push(.5*(T+1)),d.push(Y),d.push(T),d.push(U),m.push(i[0]),m.push(i[1]),m.push(i[2]),m.push(i[3]),A.push(s*Y+o[0]),A.push(s*T+o[1]),A.push(s*U+o[2])}for(var I=0;I<h;I++)for(var z=0;z<c;z++){var D=I*(c+1)+z,L=D+c+1;p.push(D),p.push(L),p.push(D+1),p.push(L),p.push(L+1),p.push(D+1)}if(!f){A=function(t,e){for(var r=[],n=0;n<e.length;++n){var a=3*e[n];r.push(t[a]),r.push(t[a+1]),r.push(t[a+2])}return r}(A,p),m=[];for(var C=0;C<p.length;++C)m.push(i[0]),m.push(i[1]),m.push(i[2]),m.push(i[3]);d=function(t,e){for(var r=[],a=0;a<e.length;a+=3){var i=3*e[a],o=3*e[a+1],s=3*e[a+2],u=new n.a(t[i],t[i+1],t[i+2]),f=new n.a(t[o],t[o+1],t[o+2]),l=new n.a(t[s],t[s+1],t[s+2]),h=(u.x+f.x+l.x)/3,c=(u.y+f.y+l.y)/3,A=(u.z+f.z+l.z)/3,m=new n.a(h,c,A);r.push(m.x),r.push(m.y),r.push(m.z),r.push(m.x),r.push(m.y),r.push(m.z),r.push(m.x),r.push(m.y),r.push(m.z)}return r}(d,p)}R[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,R[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(d),t.STATIC_DRAW),R[r].itemSize=3,R[r].numItems=d.length/3,g[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,g[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(m),t.STATIC_DRAW),g[r].itemSize=4,g[r].numItems=m.length/4,x[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,x[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(A),t.STATIC_DRAW),x[r].itemSize=3,x[r].numItems=A.length/3,l&&(y[r]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,y[r]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(v),t.STATIC_DRAW),y[r].itemSize=2,y[r].numItems=v.length/2),B[r]=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,B[r]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(p),t.STREAM_DRAW),B[r].itemSize=3,B[r].numItems=p.length}},3:function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return i});var n=r(0),a=function(t){t=Object.assign({},{radius:1,position:new n.a(0,0,0),velocity:new n.a(0,0,0),acceleration:new n.a(0,0,0)},t),this.radius=t.radius,this.position=t.position,this.velocity=t.velocity,this.acceleration=t.acceleration,this.vboIndex=t.vboIndex,this.totalVelocity=0},i=function(t){t=Object.assign({},{startX:0,startY:0,endX:0,endY:0},t),this.slope=0,(t.endX-t.startX>1e-4||t.endX-t.startX<-.001)&&(this.slope=(t.endY-t.startY)/(t.endX-t.startX)),this.startX=t.startX,this.startY=t.startY,this.endX=t.endX,this.endY=t.endY;var e=[t.startX-t.endX,t.startY-t.endY];this.angle=0,this.angle=Math.atan2(e[1],e[0])}},54:function(t,e,r){"use strict";r.r(e);var n=r(2),a=r(3),i=r(0),o=null,s=null,u=null,f=null,l=null,h=null,c=null,A=null,m=null,d=[],p=[],v=[],R=[],g=mat4.create(),x=mat4.create(),y=mat3.create(),B=!1,b={flat:{vertexShader:"\n    attribute vec3 aVertexPosition;\n    attribute vec3 aVertexColor;\n    attribute vec3 aVertexNormal;\n\n    uniform mat4 uPMatrix;    \n    uniform mat4 uMVMatrix;\n    uniform mat3 uNormalMatrix;\n    \n    varying highp vec3 vColor;\n    varying highp vec3 L;\n    varying highp vec3 N;\n    \n    void main(void) {\n      gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n      \n      vec3 pointLightPosition = vec3(1.0, 2.0, -1.0);\n      vec3 pointLightDirection = normalize(vec3(pointLightPosition.xyz - aVertexPosition.xyz));\n      vec3 ambientColor = vec3(0.1, 0.1, 0.1);\n      \n      L = vec3(uPMatrix * uMVMatrix * vec4(pointLightDirection, 1.0));\n      N = uNormalMatrix * aVertexNormal;\n      \n      vColor = aVertexColor;\n    }\n  ",fragmentShader:"\n    varying highp vec3 vColor;\n    varying highp vec3 N;\n    varying highp vec3 L;\n    \n    void main(void) {\n      highp float lambert = max(dot(normalize(N), normalize(L)), 0.0);\n      gl_FragColor = vec4(vColor * lambert, 1.0);\n    }\n  "}},F=[],E=.5,_=-1,S=100,w=65,M=15,Y=20,T=15,U=60,I=30,z=45,D=2*U,L=3*U,C=25,V=.15,P=null,N=[];function X(t,e){var r=o.createShader(e);return o.shaderSource(r,t),o.compileShader(r),o.getShaderParameter(r,o.COMPILE_STATUS)||alert("Error compiling shader: "+o.getShaderInfoLog(r)),r}function W(){o.uniformMatrix4fv(f.pMatrixUniform,!1,g),o.uniformMatrix4fv(f.mvMatrixUniform,!1,x),o.uniformMatrix3fv(f.normalMatrixUniform,!1,y)}window.addEventListener("load",function(){s=document.querySelector("#canvas"),u=document.querySelector("#container"),s.width=u.clientWidth,s.height=u.clientHeight,function(){var t=function(t){t>0?E+=1:(E-=.1)<.01&&(E=.1)};s.addEventListener("mousewheel",function(e){e.stopPropagation(),e.preventDefault(),t(e.wheelDelta)}),s.addEventListener("DOMMouseScroll",function(e){e.stopPropagation(),e.preventDefault(),t(-.1*e.originalEvent.detail)})}();try{o=s.getContext("webgl",{preserveDrawingBuffer:!0})||s.getContext("experimental-webgl",{preserveDrawingBuffer:!0})}catch(t){console.error(t)}o&&(!function(t){(function(t,e){var r=b[e].vertexShader,n=b[e].fragmentShader;h=X(r,o.VERTEX_SHADER),l=X(n,o.FRAGMENT_SHADER),o.attachShader(t,h),o.attachShader(t,l),o.linkProgram(t),o.getProgramParameter(t,o.LINK_STATUS)||alert("Unable to initialize the shader program.")})(f=o.createProgram(),t),o.useProgram(f),f.pMatrixUniform=o.getUniformLocation(f,"uPMatrix"),f.mvMatrixUniform=o.getUniformLocation(f,"uMVMatrix"),f.normalMatrixUniform=o.getUniformLocation(f,"uNormalMatrix")}("flat"),function(){Object(n.a)(o,{trianglesNormalBuffers:p,trianglesColorBuffers:v,trianglesVerticeBuffers:d,vertexIndexBuffers:R},0,{translation:[0,_,0],size:S}),function(t){var e=[0,0,0,I,0,0,z,0,0,U,0,0,0,M,0,I,M,0,z,M,0,U,M,0,0,w,0,U,Y,0,0,0,C,I,0,C,z,0,C,U,0,C,0,M,C,I,M,C,z,M,C,U,M,C,0,w,C,U,Y,C,D,0,0,L,0,0,D,T,0,D,0,C,L,0,C,D,T,C],r=[0,1,5,0,5,4,1,6,5,1,2,6,2,3,7,2,7,6,6,7,9,4,5,8,10,15,11,10,14,15,11,15,16,11,16,12,12,17,13,12,16,17,16,19,17,14,18,15,0,13,3,0,10,13,0,8,10,8,18,10,3,13,9,9,13,19,8,5,15,8,15,18,5,6,16,5,16,15,6,9,19,6,19,16,20,21,22,23,25,24,20,22,23,23,22,25,20,23,21,21,23,24,21,24,22,22,24,25],n=function(t,e){for(var r=[],n=0;n<e.length;n+=3){var a=e[n],i=e[n+1],o=e[n+2],s=[t[3*a]-t[3*i],t[3*a+1]-t[3*i+1],t[3*a+2]-t[3*i+2]],u=[t[3*a]-t[3*o],t[3*a+1]-t[3*o+1],t[3*a+2]-t[3*o+2]],f=[s[1]*u[2]-s[2]*u[1],s[2]*u[0]-s[0]*u[2],s[0]*u[1]-s[1]*u[0]];r.push.apply(r,f),r.push.apply(r,f),r.push.apply(r,f)}return r}(e,r);p[t]=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,p[t]),o.bufferData(o.ARRAY_BUFFER,new Float32Array(n),o.STATIC_DRAW),p[t].itemSize=3,p[t].numItems=n.length/3,d[t]=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,d[t]),o.bufferData(o.ARRAY_BUFFER,new Float32Array(e),o.STATIC_DRAW),d[t].itemSize=3,d[t].numItems=e.length/3,R[t]=o.createBuffer(),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,R[t]),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),o.STREAM_DRAW),R[t].itemSize=3,R[t].numItems=r.length}(1),function(){var t={startX:0,startY:w,endX:I,endY:M};N.push(new a.b(t));var e={startX:I,startY:M,endX:z,endY:M};N.push(new a.b(e)),e={startX:z,startY:M,endX:U,endY:Y},N.push(new a.b(e)),e={startX:D,startY:T,endX:L,endY:0},N.push(new a.b(e))}();Object(n.b)(o,{trianglesNormalBuffers:p,trianglesColorBuffers:v,trianglesVerticeBuffers:d,vertexIndexBuffers:R},2,{color:[1,0,0,.9],radius:2}),P=new a.a({vboIndex:2,radius:2,position:new i.a(0,w*V,0),acceleration:new i.a(0,-.001,0)}),F.push(P),c=o.getAttribLocation(f,"aVertexPosition"),m=o.getAttribLocation(f,"aVertexColor"),A=o.getAttribLocation(f,"aVertexNormal"),o.enableVertexAttribArray(c),o.enableVertexAttribArray(m),o.enableVertexAttribArray(A)}(),function t(){B||(o.enable(o.DEPTH_TEST),o.viewport(0,0,s.width,s.height),mat4.perspective(g,45,s.width/s.height,.1,100),function(){for(var t=0;t<R.length;++t){mat4.identity(x),mat4.translate(x,x,[0,-1,-20]),mat4.rotate(x,x,-40*Math.PI/180,[0,1,0]),mat4.rotate(x,x,14*Math.PI/180,[1,0,0]),mat4.scale(x,x,[E,E,E]),1===t?(mat4.translate(x,x,[.5*-L*V,_,.5*-C*V]),mat4.scale(x,x,[V,V,V])):2===t&&(mat4.translate(x,x,[(P.radius-.5*L)*V+P.position.x,(_-P.radius)*V+P.position.y,P.position.z]),mat4.scale(x,x,[V,V,V]));var e=mat3.create();mat3.fromMat4(e,x),mat3.invert(y,e),mat3.transpose(y,y),W(),o.bindBuffer(o.ARRAY_BUFFER,d[t]),o.vertexAttribPointer(c,3,o.FLOAT,!1,0,0),1===t?(o.disableVertexAttribArray(m),o.vertexAttrib4f(m,1,.9,.7,1)):(o.enableVertexAttribArray(m),o.bindBuffer(o.ARRAY_BUFFER,v[t]),o.vertexAttribPointer(m,4,o.FLOAT,!1,0,0)),o.bindBuffer(o.ARRAY_BUFFER,p[t]),o.vertexAttribPointer(A,3,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,R[t]),o.drawElements(o.TRIANGLES,R[t].numItems,o.UNSIGNED_SHORT,0)}}(),function(){var t=P.position.x/V;if(P.position.y<0)return;for(var e=!1,r=0;r<N.length;r++)t>=N[r].startX&&t<=N[r].endX&&(e=!0,(N[r].slope<-.001||N[r].slope>.001)&&(N[r].slope>.001?P.totalVelocity-=P.acceleration.y:N[r].slope<-.001&&(P.totalVelocity+=P.acceleration.y),P.velocity.x=P.totalVelocity*Math.cos(N[r].angle),P.velocity.y=P.totalVelocity*Math.sin(N[r].angle),P.position.y+=P.velocity.y),P.position.x+=P.velocity.x);e||(P.velocity.y+=P.acceleration.y,P.position.x+=P.velocity.x,P.position.y+=P.velocity.y)}()),requestAnimationFrame(t)}())}),document.addEventListener("keyup",function(t){switch(console.log(t.keyCode),t.keyCode){case 80:B=!B}})}},[[54,0]]]);
//# sourceMappingURL=webgl-physics-ramp.js.map