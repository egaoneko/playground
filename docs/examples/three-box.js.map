{"version":3,"sources":["webpack:///./three-box.js","webpack:///./utils/box.js"],"names":["__webpack_require__","r","__webpack_exports__","_utils_box__WEBPACK_IMPORTED_MODULE_0__","container","document","getElementById","width","clientWidth","height","clientHeight","windowCanvas","ratio","window","devicePixelRatio","images","Box","option","Object","assign","this","init","animate","prototype","camera","THREE","PerspectiveCamera","position","x","y","z","lookAt","Vector3","scene","Scene","const","ambiLight","AmbientLight","add","light","DirectionalLight","set","cube","createMesh","BoxGeometry","console","log","geometry","faceVertexUvs","renderer","WebGLRenderer","canvas","alpha","setClearColor","setPixelRatio","shadowMapEnabled","geom","mat","length","MeshFaceMaterial","map","image","createMaterial","Mesh","let","texture","TextureLoader","load","CanvasTexture","MeshPhongMaterial","requestAnimationFrame","bind","render","time","Date","now","rotation","resize","aspect","updateProjectionMatrix","setSize"],"mappings":"0FAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,GAEMI,EAAYC,SAASC,eAAe,aACpCC,EAAQH,EAAUI,YAClBC,EAASL,EAAUM,aAEnBC,EAAeN,SAASC,eAAe,UAE7C,IAAIH,EAAA,EAAIQ,SACNJ,SACAE,EACAG,MAAOC,OAAOC,iBACdC,QACE,uBACA,uBACA,uBACA,uBACA,uBACA,0DClBW,IAAMC,EACnB,SAAYZ,EAAWa,GAChBb,IAILa,EAASC,OAAOC,QACdZ,MAAO,IACPE,OAAQ,IACRG,MAAO,EACPG,WACCE,GAEHG,KAAKhB,UAAYA,EACjBgB,KAAKb,MAAQU,EAAOV,MACpBa,KAAKX,OAASQ,EAAOR,OACrBW,KAAKR,MAAQK,EAAOL,MACpBQ,KAAKL,OAASE,EAAOF,OAErBK,KAAKC,OACLD,KAAKE,YAGTN,EAAAO,UAAEF,KAAA,WAEMD,KAAKhB,UAAUG,QAAUa,KAAKb,OAASa,KAAKhB,UAAUG,QAAUa,KAAKX,SACvEW,KAAKhB,UAAUG,MAAQa,KAAKb,MAC5Ba,KAAKhB,UAAUK,OAASW,KAAKX,QAG/BW,KAAKI,OAAS,IAAIC,MAAMC,kBAAkB,GAAIN,KAAKb,MAAQa,KAAKX,OAAQ,GAAK,KAC7EW,KAAKI,OAAOG,SAASC,EAAI,EACzBR,KAAKI,OAAOG,SAASE,EAAI,GACzBT,KAAKI,OAAOG,SAASG,EAAI,GACzBV,KAAKI,OAAOO,OAAO,IAAIN,MAAMO,QAAQ,EAAG,EAAG,IAE3CZ,KAAKa,MAAQ,IAAIR,MAAMS,MAEvBC,IAAMC,EAAY,IAAIX,MAAMY,aAAa,SACzCjB,KAAKa,MAAMK,IAAIF,GAEfD,IAAMI,EAAQ,IAAId,MAAMe,iBACxBD,EAAMZ,SAASc,IAAI,EAAG,GAAI,IAC1BrB,KAAKa,MAAMK,IAAIC,GAEfnB,KAAKsB,KAAOtB,KAAKuB,WAAW,IAAIlB,MAAMmB,YAAY,GAAI,GAAI,IAAKxB,KAAKL,QACpEK,KAAKa,MAAMK,IAAIlB,KAAKsB,MACpBG,QAAQC,IAAI1B,KAAKsB,KAAKK,SAASC,eAE/B5B,KAAK6B,SAAW,IAAIxB,MAAMyB,eACxBC,OAAQ/B,KAAKhB,UACbgD,OAAO,IAEThC,KAAK6B,SAASI,cAAc,UAAW,IACvCjC,KAAK6B,SAASK,cAAclC,KAAKR,OACjCQ,KAAK6B,SAASM,kBAAmB,GAGrCvC,EAAAO,UAAEoB,WAAA,SAAWa,EAAMzC,OACX0C,SAMJ,OAJEA,EADoB,IAAlB1C,EAAO2C,OACH,IAAIjC,MAAMkC,iBAAiB5C,EAAO6C,IAAG,SAACC,GAAM,OAAGzC,EAAK0C,eAAeD,MAEnEzC,KAAK0C,eAAe/C,EAAO,IAE5B,IAAIU,MAAMsC,KAAKP,EAAMC,IAGhCzC,EAAAO,UAAEuC,eAAA,SAAeD,GACbG,IAAIC,EAGFA,EADmB,iBAAVJ,GACC,IAAIpC,MAAMyC,eAAgBC,KAAKN,GAE/B,IAAIpC,MAAM2C,cAAcP,GAGpC1B,IAAMsB,EAAM,IAAIhC,MAAM4C,kBAEtB,OADAZ,EAAIG,IAAMK,EACHR,GAGXzC,EAAAO,UAAED,QAAA,WACEgD,sBAAsBlD,KAAKE,QAAQiD,KAAKnD,OACxCA,KAAKoD,UAGTxD,EAAAO,UAAEiD,OAAA,WACErC,IAAMsC,EAAoB,KAAbC,KAAKC,MAClBvD,KAAKsB,KAAKkC,SAAShD,EAAW,IAAP6C,EACvBrD,KAAKsB,KAAKkC,SAAS/C,EAAW,GAAP4C,EACvBrD,KAAK6B,SAASuB,OAAOpD,KAAKa,MAAOb,KAAKI,SAG1CR,EAAAO,UAAEsD,OAAA,SAAOtE,EAAOE,GACZW,KAAKb,MAAQA,EACba,KAAKX,OAASA,EAEVW,KAAKhB,UAAUG,QAAUa,KAAKb,OAASa,KAAKhB,UAAUG,QAAUa,KAAKX,SACvEW,KAAKhB,UAAUG,MAAQa,KAAKb,MAC5Ba,KAAKhB,UAAUK,OAASW,KAAKX,QAG/BW,KAAKI,OAAOsD,OAAS1D,KAAKb,MAAQa,KAAKX,OACvCW,KAAKI,OAAOuD,yBACZ3D,KAAK6B,SAAS+B,QAAQ5D,KAAKb,MAAOa,KAAKX","file":"three-box.js","sourcesContent":["import Box from './utils/box';\n\nconst container = document.getElementById('container');\nconst width = container.clientWidth;\nconst height = container.clientHeight;\n\nconst windowCanvas = document.getElementById('canvas');\n\nnew Box(windowCanvas, {\n  width,\n  height,\n  ratio: window.devicePixelRatio,\n  images: [\n    'data/img/iu/iu01.jpg',\n    'data/img/iu/iu02.jpg',\n    'data/img/iu/iu03.jpg',\n    'data/img/iu/iu04.jpg',\n    'data/img/iu/iu05.jpg',\n    'data/img/iu/iu06.jpg',\n  ]\n});\n","export default class Box {\n  constructor(container, option) {\n    if (!container) {\n      return;\n    }\n\n    option = Object.assign({\n      width: 300,\n      height: 300,\n      ratio: 1,\n      images: []\n    }, option);\n\n    this.container = container;\n    this.width = option.width;\n    this.height = option.height;\n    this.ratio = option.ratio;\n    this.images = option.images;\n\n    this.init();\n    this.animate();\n  }\n\n  init() {\n    // Resize to the screen\n    if (this.container.width !== this.width || this.container.width !== this.height) {\n      this.container.width = this.width;\n      this.container.height = this.height;\n    }\n\n    this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 0.1, 1000);\n    this.camera.position.x = 0;\n    this.camera.position.y = 12;\n    this.camera.position.z = 28;\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n    this.scene = new THREE.Scene();\n\n    const ambiLight = new THREE.AmbientLight(0x141414);\n    this.scene.add(ambiLight);\n\n    const light = new THREE.DirectionalLight();\n    light.position.set(0, 30, 20);\n    this.scene.add(light);\n\n    this.cube = this.createMesh(new THREE.BoxGeometry(10, 10, 10), this.images);\n    this.scene.add(this.cube);\n    console.log(this.cube.geometry.faceVertexUvs);\n\n    this.renderer = new THREE.WebGLRenderer({\n      canvas: this.container,\n      alpha: true,\n    });\n    this.renderer.setClearColor(0xFFFFFFF, 0.2);\n    this.renderer.setPixelRatio(this.ratio);\n    this.renderer.shadowMapEnabled = true;\n  }\n\n  createMesh(geom, images) {\n    let mat;\n    if (images.length === 6) {\n      mat = new THREE.MeshFaceMaterial(images.map(image => this.createMaterial(image)));\n    } else {\n      mat = this.createMaterial(images[0]);\n    }\n    return new THREE.Mesh(geom, mat);\n  }\n\n  createMaterial(image) {\n    let texture;\n\n    if (typeof image === 'string') {\n      texture = new THREE.TextureLoader().load(image);\n    } else {\n      texture = new THREE.CanvasTexture(image);\n    }\n\n    const mat = new THREE.MeshPhongMaterial();\n    mat.map = texture;\n    return mat;\n  }\n\n  animate() {\n    requestAnimationFrame(this.animate.bind(this));\n    this.render();\n  }\n\n  render() {\n    const time = Date.now() * 0.001;\n    this.cube.rotation.x = time * 0.25;\n    this.cube.rotation.y = time * 0.5;\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  resize(width, height) {\n    this.width = width;\n    this.height = height;\n\n    if (this.container.width !== this.width || this.container.width !== this.height) {\n      this.container.width = this.width;\n      this.container.height = this.height;\n    }\n\n    this.camera.aspect = this.width / this.height;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(this.width, this.height);\n  }\n}\n\n\n"],"sourceRoot":""}