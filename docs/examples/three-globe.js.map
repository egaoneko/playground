{"version":3,"sources":["webpack:///./three-globe.js"],"names":["const","renderer","scene","camera","width","height","container","globe","VIEW_ANGLE","NEAR","FAR","RADIUS","raycaster","THREE","Raycaster","mouse","Vector2","onWindowResize","clientWidth","clientHeight","aspect","updateProjectionMatrix","setSize","onClick","event","x","clientX","window","innerWidth","y","clientY","innerHeight","setFromCamera","intersects","intersectObject","i","length","console","log","convertVector3ToLngLat","point","onDBClick","geometry","SphereGeometry","material","MeshBasicMaterial","color","sphere","Mesh","position","copy","add","convertLngLatToVector3","lng","lat","radius","phi","deg2rad","theta","Math","sin","cos","z","Vector3","vector","normalize","let","rad2deg","atan2","p","acos","dot","degree","PI","radians","proj4","defs","document","getElementById","Scene","antialias","background","Color","fog","FogExp2","PerspectiveCamera","set","pointLight","PointLight","Group","TextureLoader","load","texture","map","overdraw","mesh","PointsMaterial","size","transparency","opacity","random","vertices","push","stars","Points","WebGLRenderer","alpha","setClearColor","setPixelRatio","devicePixelRatio","appendChild","domElement","controls","OrbitControls","screenSpacePanning","minDistance","maxDistance","addEventListener","fetch","then","response","json","geojson","capitals","features","feature","Object","assign","properties","coordinates","turf","getCoord","forEach","capital","ref","text","message","parameters","undefined","fontface","hasOwnProperty","fontsize","borderThickness","borderColor","r","g","b","a","backgroundColor","textColor","canvas","createElement","context","getContext","font","textWidth","measureText","fillStyle","strokeStyle","lineWidth","ctx","w","h","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","stroke","roundRect","fillText","Texture","needsUpdate","spriteMaterial","SpriteMaterial","useScreenCoordinates","sprite","Sprite","scale","makeTextSprite","city","init","animate","requestAnimationFrame","render"],"mappings":"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","file":"three-globe.js","sourcesContent":["// three\nconst VIEW_ANGLE = 45;\nconst NEAR = 0.1;\nconst FAR = 2000;\n\n// Earth\nconst RADIUS = 200;\n\nlet renderer;\nlet scene;\nlet camera;\nlet width;\nlet height;\nlet container;\nlet globe;\n\nconst raycaster = new THREE.Raycaster();\nconst mouse = new THREE.Vector2();\n\n// Proj4\nproj4.defs([\n  [\n    'Globe',\n    '+proj=longlat +a=6367470 +b=6367470 +ellps=sphere +datum=WGS84 +units=degrees'\n  ]\n]);\n// console.log(proj4('Globe', 'EPSG:4326', [126.982512, 37.564174]));\n// console.log(proj4('EPSG:4326', 'EPSG:3857', [126.982512, 37.564174]));\n\ninit();\nanimate();\n\nfunction init() {\n  container = document.getElementById('container');\n  width = container.clientWidth;\n  height = container.clientHeight;\n\n  // initEvent(container);\n\n  // scene\n  scene = new THREE.Scene({antialias: true});\n  scene.background = new THREE.Color(0x000);\n  scene.fog = new THREE.FogExp2(0x000000, 0.0003);\n\n  // camera\n  camera = new THREE.PerspectiveCamera(VIEW_ANGLE, width / height, NEAR, FAR);\n  camera.position.set(0, 0, 1000);\n  // camera.lookAt(0, 0, 0);\n\n  // light\n  const pointLight = new THREE.PointLight(0xFFFFFF);\n  pointLight.position.set(10, 50, 400);\n  scene.add(pointLight);\n\n  // globe\n  const radius = RADIUS;\n  const segments = 50;\n  const rings = 50;\n\n  globe = new THREE.Group();\n  scene.add(globe);\n\n  const loader = new THREE.TextureLoader();\n  loader.load(\n    'data/img/land_ocean_ice_cloud_2048.jpg',\n    (texture) => {\n      // Create the sphere\n      const sphere = new THREE.SphereGeometry(radius, segments, rings);\n\n      // Map the texture to the material.\n      const material = new THREE.MeshBasicMaterial({map: texture, overdraw: 0.5});\n\n      // Create a new mesh with sphere geometry.\n      const mesh = new THREE.Mesh(sphere, material);\n\n      // Add mesh to globe\n      globe.add(mesh);\n    }\n  );\n  globe.position.set(0, 0, 0);\n\n  // stars\n  const starSize = 45000;\n  const geometry = new THREE.SphereGeometry(1000, 100, 50);\n\n  const materialOptions = {\n    size: 1.0, //I know this is the default, it's for you.  Play with it if you want.\n    transparency: true,\n    opacity: 0.7\n  };\n\n  const material = new THREE.PointsMaterial(materialOptions);\n\n  // The wizard gaze became stern, his jaw set, he creates the cosmos with a wave of his arms\n\n  for (let i = 0; i < starSize; i++) {\n    const vector = new THREE.Vector3();\n    vector.x = Math.random() * 2000 - 1000;\n    vector.y = Math.random() * 2000 - 1000;\n    vector.z = Math.random() * 2000 - 1000;\n\n    geometry.vertices.push(vector);\n  }\n\n  const stars = new THREE.Points(geometry, material);\n  scene.add(stars);\n\n  // renderer\n  renderer = new THREE.WebGLRenderer({\n    alpha: true,\n    antialias: true\n  });\n  renderer.setClearColor(0xFFFFFFF, 0);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(width, height);\n\n  container.appendChild(renderer.domElement);\n\n  // controls\n  const controls = new THREE.OrbitControls(camera, renderer.domElement);\n  controls.screenSpacePanning = true;\n  controls.minDistance = 300;\n  controls.maxDistance = FAR;\n\n  window.addEventListener('resize', onWindowResize, false);\n  window.addEventListener('click', onClick);\n  window.addEventListener('dblclick', onDBClick);\n\n  loadGeojson();\n}\n\nfunction onWindowResize() {\n  width = container.clientWidth;\n  height = container.clientHeight;\n  camera.aspect = width / height;\n  camera.updateProjectionMatrix();\n  renderer.setSize(width, height);\n}\n\nfunction animate() {\n  requestAnimationFrame(animate);\n  render();\n}\n\nfunction render() {\n  renderer.render(scene, camera);\n}\n\nfunction loadGeojson() {\n  fetch('data/geojson/capitals.geojson')\n    .then(response => response.json())\n    .then(geojson => {\n      const capitals = geojson.features\n        .map(feature => {\n          return Object.assign(\n            {},\n            feature.properties,\n            {\n              coordinates: turf.getCoord(feature)\n            }\n          );\n        });\n\n\n      capitals.forEach(capital => {\n        const [lng, lat] = capital.coordinates;\n        // const [lng, lat] = [126.982512, 37.564174]; // Seoul\n        // const [lng, lat] = [126.529541, 33.364209]; // Jeju\n        // const [lng, lat] = [-73.959961, 40.725275]; // New York\n        // const [lng, lat] = [-74.132116, 20.215811];\n        // const [lng, lat] = proj4('Globe', 'EPSG:4326', [-74.132116, 20.215811]);\n\n        const geometry = new THREE.SphereGeometry(1);\n        const material = new THREE.MeshBasicMaterial({color: '#ff0000'});\n        const sphere = new THREE.Mesh(geometry, material);\n        sphere.position.copy(convertLngLatToVector3(lng, lat, RADIUS));\n        scene.add(sphere);\n\n        const text = makeTextSprite(capital.city, {fontsize: 50});\n        text.position.copy(convertLngLatToVector3(lng, lat, RADIUS + 10));\n        scene.add(text);\n      });\n    });\n}\n\nfunction makeTextSprite(message, parameters) {\n  if (parameters === undefined) parameters = {};\n\n  const fontface = parameters.hasOwnProperty('fontface') ? parameters['fontface'] : 'Arial';\n  const fontsize = parameters.hasOwnProperty('fontsize') ? parameters['fontsize'] : 18;\n  const borderThickness = parameters.hasOwnProperty('borderThickness') ? parameters['borderThickness'] : 4;\n  const borderColor = parameters.hasOwnProperty('borderColor') ? parameters['borderColor'] : {r: 0, g: 0, b: 0, a: 1.0};\n  const backgroundColor = parameters.hasOwnProperty('backgroundColor') ? parameters['backgroundColor'] : {\n    r: 255,\n    g: 255,\n    b: 255,\n    a: 1.0\n  };\n  const textColor = parameters.hasOwnProperty('textColor') ? parameters['textColor'] : {r: 0, g: 0, b: 0, a: 1.0};\n\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  context.font = 'Bold ' + fontsize + 'px ' + fontface;\n  const metrics = context.measureText(message);\n  const textWidth = metrics.width;\n\n  context.fillStyle = 'rgba(' + backgroundColor.r + ',' + backgroundColor.g + ',' + backgroundColor.b + ',' + backgroundColor.a + ')';\n  context.strokeStyle = 'rgba(' + borderColor.r + ',' + borderColor.g + ',' + borderColor.b + ',' + borderColor.a + ')';\n\n  context.lineWidth = borderThickness;\n  roundRect(context, borderThickness / 2, borderThickness / 2, (textWidth + borderThickness) * 1.1, fontsize * 1.4 + borderThickness, 8);\n\n  context.fillStyle = 'rgba(' + textColor.r + ', ' + textColor.g + ', ' + textColor.b + ', 1.0)';\n  context.fillText(message, borderThickness, fontsize + borderThickness);\n\n  const texture = new THREE.Texture(canvas);\n  texture.needsUpdate = true;\n\n  const spriteMaterial = new THREE.SpriteMaterial({map: texture, useScreenCoordinates: false});\n  const sprite = new THREE.Sprite(spriteMaterial);\n  sprite.scale.set(0.5 * fontsize, 0.25 * fontsize, 0.75 * fontsize);\n  return sprite;\n}\n\nfunction roundRect(ctx, x, y, w, h, r) {\n  ctx.beginPath();\n  ctx.moveTo(x + r, y);\n  ctx.lineTo(x + w - r, y);\n  ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n  ctx.lineTo(x + w, y + h - r);\n  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n  ctx.lineTo(x + r, y + h);\n  ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n  ctx.lineTo(x, y + r);\n  ctx.quadraticCurveTo(x, y, x + r, y);\n  ctx.closePath();\n  ctx.fill();\n  ctx.stroke();\n}\n\nfunction onClick(event) {\n  // mouse.x = (event.clientX / renderer.domElement.clientWidth) * 2 - 1;\n  // mouse.y = -(event.clientY / renderer.domElement.clientHeight) * 2 + 1;\n  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\n  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n\n  raycaster.setFromCamera(mouse, camera);\n\n  const intersects = raycaster.intersectObject(globe, true);\n\n  for (let i = 0; i < intersects.length; i++) {\n    console.log(convertVector3ToLngLat(intersects[i].point));\n  }\n}\n\nfunction onDBClick(event) {\n  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\n  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n\n  raycaster.setFromCamera(mouse, camera);\n\n  const intersects = raycaster.intersectObject(globe, true);\n\n  for (let i = 0; i < intersects.length; i++) {\n    const geometry = new THREE.SphereGeometry(0.5);\n    const material = new THREE.MeshBasicMaterial({color: '#ff0000'});\n    const sphere = new THREE.Mesh(geometry, material);\n    sphere.position.copy(intersects[i].point);\n    scene.add(sphere);\n  }\n}\n\nfunction convertLngLatToVector3(lng, lat, radius) {\n  const phi = deg2rad(90 - lat);\n  const theta = deg2rad(lng + 180);\n\n  const x = -((radius) * Math.sin(phi) * Math.cos(theta));\n  const z = ((radius) * Math.sin(phi) * Math.sin(theta));\n  const y = ((radius) * Math.cos(phi));\n\n  return new THREE.Vector3(x, y, z);\n}\n\nfunction convertVector3ToLngLat(vector) {\n  vector.normalize();\n  let lng = (270 + rad2deg(Math.atan2(vector.x , vector.z))) % 360;\n\n  let p = new THREE.Vector3(vector.x, 0, vector.z);\n  p.normalize();\n\n  let lat = rad2deg(Math.acos(p.dot(vector)));\n\n  if (vector.y < 0) {\n    lat *= -1;\n  }\n\n  return [lng, lat];\n}\n\nfunction deg2rad(degree) {\n  return degree * (Math.PI / 180);\n}\n\nfunction rad2deg(radians) {\n  return radians * (180 / Math.PI);\n}\n"],"sourceRoot":""}