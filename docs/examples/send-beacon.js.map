{"version":3,"sources":["webpack:///./send-beacon.js"],"names":["const","putsReqUrl","Date","toISOString","split","putsReqInspectUrl","sendBeacon","url","data","navigator","sendXMLHttpRequest","async","client","XMLHttpRequest","open","setRequestHeader","send","document","querySelector","addEventListener","e","preventDefault","stopPropagation","location","href","alert","window"],"mappings":"2EAAAA,IACMC,EAAa,kCADP,oBAAmB,IAAIC,MAAOC,cAAcC,MAAM,KAAK,IAE7DC,EAAuBJ,EAAU,WAkEvC,SAASK,EAAWC,EAAKC,GACvBC,UAAUH,WAAWC,EAAKC,GAG5B,SAASE,EAAmBH,EAAKC,EAAMG,GACrCX,IAAMY,EAAS,IAAIC,eACnBD,EAAOE,KAAK,OAAQP,EAAKI,GACzBC,EAAOG,iBAAiB,eAAgB,4BACxCH,EAAOI,KAAKR,GAxEdS,SAASC,cAAc,iBACpBC,iBAAiB,QAAO,SAAGC,GAC1BA,EAAEC,iBACFD,EAAEE,kBAEFC,SAASC,KAAOnB,IAGpBY,SAASC,cAAc,kBACpBC,iBAAiB,QAAO,WACjB,eAAgBV,WACpBgB,MAAM,2CAGRnB,EAAWL,EAAY,+BAA+BC,QAG1De,SAASC,cAAc,kBACpBC,iBAAiB,QAAO,WACjB,eAAgBV,WACpBgB,MAAM,2CAGRC,OAAOP,iBAAiB,eAAgB,WACtCb,EAAWL,EAAY,4CAA4CC,QAClE,KAGPe,SAASC,cAAc,kBACpBC,iBAAiB,QAAO,WACjB,eAAgBV,WACpBgB,MAAM,2CAGRC,OAAOP,iBAAiB,SAAU,WAChCb,EAAWL,EAAY,sCAAsCC,QAC5D,KAGPe,SAASC,cAAc,kBACpBC,iBAAiB,QAAO,WACjB,eAAgBV,WACpBgB,MAAM,2CAGRC,OAAOP,iBAAiB,WAAY,WAClCb,EAAWL,EAAY,wCAAwCC,QAC9D,KAGPe,SAASC,cAAc,yBACpBC,iBAAiB,QAAO,WACvBO,OAAOP,iBAAiB,eAAgB,WACtCT,EAAmBT,EAAY,0DAA0DC,MAAU,KAClG,KAGPe,SAASC,cAAc,wBACpBC,iBAAiB,QAAO,WACvBO,OAAOP,iBAAiB,eAAgB,WACtCT,EAAmBT,EAAY,yDAAyDC,MAAU,KACjG","file":"send-beacon.js","sourcesContent":["const key = `smilecat-beacon-${new Date().toISOString().split('T')[0]}`;\nconst putsReqUrl = `https://putsreq.herokuapp.com/${key}`;\nconst putsReqInspectUrl = `${putsReqUrl}/inspect`;\n\ndocument.querySelector('#inspect-link')\n  .addEventListener('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    location.href = putsReqInspectUrl;\n  });\n\ndocument.querySelector('#send-beacon-1')\n  .addEventListener('click', () => {\n    if (!('sendBeacon' in navigator)) {\n      alert('Not support sendBeacon in this browser.');\n    }\n\n    sendBeacon(putsReqUrl, `Just sent by a beacon! @${new Date()}`);\n  });\n\ndocument.querySelector('#send-beacon-2')\n  .addEventListener('click', () => {\n    if (!('sendBeacon' in navigator)) {\n      alert('Not support sendBeacon in this browser.');\n    }\n\n    window.addEventListener('beforeunload', function() {\n      sendBeacon(putsReqUrl, `Sent by a beacon when beforeunload! @${new Date()}`);\n    }, false);\n  });\n\ndocument.querySelector('#send-beacon-3')\n  .addEventListener('click', () => {\n    if (!('sendBeacon' in navigator)) {\n      alert('Not support sendBeacon in this browser.');\n    }\n\n    window.addEventListener('unload', function() {\n      sendBeacon(putsReqUrl, `Sent by a beacon when unload! @${new Date()}`);\n    }, false);\n  });\n\ndocument.querySelector('#send-beacon-4')\n  .addEventListener('click', () => {\n    if (!('sendBeacon' in navigator)) {\n      alert('Not support sendBeacon in this browser.');\n    }\n\n    window.addEventListener('pagehide', function() {\n      sendBeacon(putsReqUrl, `Sent by a beacon when pagehide! @${new Date()}`);\n    }, false);\n  });\n\ndocument.querySelector('#async-xmlhttprequest')\n  .addEventListener('click', () => {\n    window.addEventListener('beforeunload', function() {\n      sendXMLHttpRequest(putsReqUrl, `Sent by a async XMLHttpRequest when beforeunload! @${new Date()}`, true);\n    }, false);\n  });\n\ndocument.querySelector('#sync-xmlhttprequest')\n  .addEventListener('click', () => {\n    window.addEventListener('beforeunload', function() {\n      sendXMLHttpRequest(putsReqUrl, `Sent by a sync XMLHttpRequest when beforeunload! @${new Date()}`, false);\n    }, false);\n  });\n\nfunction sendBeacon(url, data) {\n  navigator.sendBeacon(url, data);\n}\n\nfunction sendXMLHttpRequest(url, data, async) {\n  const client = new XMLHttpRequest();\n  client.open(\"POST\", url, async);\n  client.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n  client.send(data);\n}\n"],"sourceRoot":""}